<br><br><strong>Request Form</strong><br><br>

<% if !@shifts.map {|shift| shift.role}.include?(@user.role) %>
  <br><em>No <%= @user.role.downcase %> shifts exist.</em><br>
<% else %>
  <%= form_for :requests do |f| %>
    <% ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].each do |day| %>
      <% if @shifts.map {|shift| shift.day unless shift.day != day || shift.role != @user.role}.include?(day) %>
        <u><%= day %></u><br>
        <%= collection_check_boxes(:request, :user_id, @shifts.where(role: @user.role, day: day), :id, :time) %><br>
      <% end %>
    <% end %>
    <br><%= f.submit %> 
  <% end %>    
<% end %>