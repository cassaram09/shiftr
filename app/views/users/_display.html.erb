<% if user.avatar_file_name != nil %>
  <%= link_to image_tag(user.avatar.url, size: "200x200"), user_path(user) %><br>
<% elsif user.identity %>
  <%= link_to image_tag(user.identity.image, size: "200x200"), user_path(user) %><br>
<% end %>

<strong><%= link_to user.name.to_s + "#{user.role != '' ? ', ' + user.role.to_s.capitalize : nil}", user_path(user.id) %></strong> <%= link_to "(edit profile)", edit_user_path(user) if user.email == current_user.email || admin %><br>

<em><%= user.created_at.strftime("Joined on %B %d, %Y") %></em><br>

<% if user.phone == nil || user.phone == "" %>
  <% if user.email == current_user.email || admin %>
    <%= link_to "[ADD PHONE]", edit_user_path(user) %>
  <% else %>
    <em><%= "Phone pending" %></em>
  <% end %>
<% else %>
  <%= number_to_phone(user.phone.gsub(/[()-]/,"").to_i, area_code: true) %>
<% end %>

| <%= user.email %><br><br>

<strong>Schedule</strong><br>

<%= user.shifts.map {|shift| shift.time} %>

<br><br>

<% ["m_schedule", "t_schedule", "w_schedule", "r_schedule", "f_schedule", "s_schedule", "d_schedule"].each do |w_schedule| %>

  <% if user.send(w_schedule) %>
    <%= link_to user.send(w_schedule), shifts_path(@shifts.find(@shifts.select{|key, value| key[:time] == user.send(w_schedule).split(" ")[1]})[0]) %><br>
  <% end %>
<% end %>

